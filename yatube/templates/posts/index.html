<!-- templates/posts/index.html --> 
{% extends 'base.html' %}

{% load cache %}
{% block content %}
  <h1>Последние обновления на сайте</h1>
  {% include 'includes/switcher.html' %}
  {% cache 20 index_page page_obj.number %}
    {% for post in page_obj %}
      {% include 'includes/article.html' %}
      {% if not forloop.last %}<hr>{% endif %}
    {% endfor %}
  {% endcache %} 
  <!-- под последним постом нет линии -->
  {% include 'includes/paginator.html' %}
{% endblock %}